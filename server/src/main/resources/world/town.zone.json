{
  "id": "town",
  "name": "Millhaven",
  "description": "A bustling frontier town at the edge of the Whispering Forest.",
  "safe": true,
  "bgm": "town_peaceful",
  "spawnRoom": "town:temple",
  "spawnConfig": { "maxEntities": 0, "maxPerRoom": 0, "rateTicks": 0 },
  "imageStyle": "fantasy digital painting, rich colors, atmospheric lighting, slightly painterly, fixed perspective, JRPG background, stage-like composition",
  "imageNegativePrompt": "modern, cars, electricity, sci-fi, top-down, isometric, characters, people, figures",
  "rooms": [
    {
      "id": "town:square",
      "name": "Town Square",
      "description": "The heart of Millhaven. A weathered stone fountain stands in the center, surrounded by cobblestones worn smooth by countless boots. Merchants hawk their wares from colorful stalls, and the smell of fresh bread drifts from somewhere nearby. Roads lead in every direction.",
      "x": 0,
      "y": 0,
      "exits": {
        "NORTH": "town:gate",
        "SOUTH": "town:temple",
        "EAST": "town:market",
        "WEST": "town:tavern"
      },
      "backgroundImage": "/assets/images/rooms/town_square.webp",
      "departSound": "footstep_cobblestone",
      "imagePrompt": "First-person view standing in a medieval fantasy town square. Flat cobblestone ground plane filling the lower third. A weathered stone fountain ahead in the mid-ground. Colorful merchant stalls and timber-framed buildings line left and right edges receding to a vanishing point. Clear sky above. No people or creatures.",
      "imageWidth": 1024,
      "imageHeight": 576
    },
    {
      "id": "town:tavern",
      "name": "The Rusty Tankard",
      "description": "A dim, smoky tavern with low wooden beams and a roaring fireplace. Scarred tables are scattered about, and the bar is stained with years of spilled ale. A grizzled barkeep polishes mugs behind the counter, eyeing newcomers with practiced suspicion.",
      "x": -1,
      "y": 0,
      "exits": {
        "EAST": "town:square"
      },
      "backgroundImage": "/assets/images/rooms/town_tavern.webp",
      "departSound": "footstep_wood",
      "imagePrompt": "First-person view standing inside a dim medieval tavern. Flat wooden plank floor filling the lower third. Low wooden beams overhead, a roaring fireplace on the back wall. A long bar counter ahead, scarred tables on either side. Warm candlelight and smoky atmosphere. No people or creatures.",
      "imageWidth": 1024,
      "imageHeight": 576
    },
    {
      "id": "town:market",
      "name": "Market Street",
      "description": "A narrow street lined with merchant stalls and shop fronts. Colorful awnings shade displays of weapons, armor, potions, and exotic trinkets. Haggling voices fill the air, competing with the clang of a blacksmith's hammer from a nearby forge.",
      "x": 1,
      "y": 0,
      "exits": {
        "WEST": "town:square"
      },
      "backgroundImage": "/assets/images/rooms/town_market.webp",
      "departSound": "footstep_cobblestone",
      "imagePrompt": "First-person view standing on a narrow medieval market street. Flat stone-paved ground plane filling the lower third. Merchant stalls with colorful awnings lining both sides, receding toward a glowing blacksmith's forge ahead. Weapons and armor on display. No people or creatures.",
      "imageWidth": 1024,
      "imageHeight": 576
    },
    {
      "id": "town:gate",
      "name": "North Gate",
      "description": "The fortified northern gate of Millhaven. Thick oak doors reinforced with iron bands stand open during the day, flanked by stone watchtowers. Beyond the gate, a dirt road winds into the dark treeline of the Whispering Forest.",
      "x": 0,
      "y": 1,
      "exits": {
        "SOUTH": "town:square",
        "NORTH": "forest:edge"
      },
      "backgroundImage": "/assets/images/rooms/town_gate.webp",
      "departSound": "footstep_cobblestone",
      "imagePrompt": "First-person view standing before a fortified medieval town gate. Flat dirt and cobblestone ground plane filling the lower third. Massive oak doors reinforced with iron bands ahead, flanked by stone watchtowers on each side. A dirt road visible beyond leading into a dark forest. No people or creatures.",
      "imageWidth": 1024,
      "imageHeight": 576
    },
    {
      "id": "town:temple",
      "name": "Temple of the Dawn",
      "description": "A serene stone temple with stained glass windows that cast rainbow light across the marble floor. An altar draped in white cloth stands at the far end, and the air carries the faint scent of incense. Soft chanting echoes from somewhere within.",
      "x": 0,
      "y": -1,
      "exits": {
        "NORTH": "town:square"
      },
      "backgroundImage": "/assets/images/rooms/town_temple.webp",
      "effects": [{"type": "HEAL", "value": 5, "message": "The temple's aura soothes your wounds.", "sound": "healing_aura"}],
      "departSound": "footstep_marble",
      "imagePrompt": "First-person view standing inside a serene stone temple. Flat polished marble floor filling the lower third. Tall stained glass windows on left and right casting rainbow light. A white-draped altar centered ahead at the far wall, incense smoke curling upward. Vaulted stone ceiling. No people or creatures.",
      "imageWidth": 1024,
      "imageHeight": 576
    }
  ],
  "npcs": [
    {
      "id": "npc:town_guard",
      "name": "Town Guard",
      "description": "A stern-looking guard in chainmail, hand resting on the pommel of a well-worn sword. He watches the comings and goings with vigilant eyes.",
      "startRoomId": "town:gate",
      "behaviorType": "patrol",
      "patrolRoute": ["town:gate", "town:square", "town:market", "town:square", "town:gate"],
      "imagePrompt": "Full-body medieval town guard standing upright facing the viewer, chainmail armor over tabard, hand on sword pommel, stern expression. Single character, isolated on solid transparent background, no ground, no scenery.",
      "imageStyle": "fantasy character sprite, full body, front-facing, clean edges, game asset, transparent background, PNG cutout",
      "imageNegativePrompt": "background, scenery, ground, shadow on floor, multiple characters, portrait crop, bust only, modern, sci-fi, anime",
      "imageWidth": 384,
      "imageHeight": 512
    },
    {
      "id": "npc:barkeep",
      "name": "Barkeep Grom",
      "description": "A barrel-chested dwarf with a magnificent braided beard and arms like tree trunks. He moves behind the bar with surprising grace, simultaneously serving three customers and keeping an eye on the rowdy corner table.",
      "startRoomId": "town:tavern",
      "behaviorType": "idle",
      "imagePrompt": "Full-body stout dwarf barkeep standing upright facing the viewer, barrel chest, magnificent braided beard, leather apron, holding a tankard. Single character, isolated on solid transparent background, no ground, no scenery.",
      "imageStyle": "fantasy character sprite, full body, front-facing, clean edges, game asset, transparent background, PNG cutout",
      "imageNegativePrompt": "background, scenery, ground, shadow on floor, multiple characters, portrait crop, bust only, modern, sci-fi, anime",
      "imageWidth": 384,
      "imageHeight": 512
    },
    {
      "id": "npc:guildmaster",
      "name": "Guildmaster Aldric",
      "description": "A weathered veteran in ornate armor, bearing the scars of countless battles. His keen eyes assess you with the practiced gaze of someone who has trained hundreds of warriors. He serves as the guild trainer for all adventurers.",
      "startRoomId": "town:square",
      "behaviorType": "trainer",
      "interactSound": "trainer_greet"
    },
    {
      "id": "npc:blacksmith",
      "name": "Blacksmith Torren",
      "description": "A brawny human blacksmith with arms like oak branches and a soot-stained leather apron. He works the forge with practiced ease, hammer ringing against glowing steel. Racks of weapons and armor line the walls of his shop.",
      "startRoomId": "town:market",
      "behaviorType": "vendor",
      "interactSound": "vendor_greet",
      "vendorItems": [
        "item:iron_sword",
        "item:wooden_shield",
        "item:leather_cap",
        "item:leather_chest",
        "item:leather_legs",
        "item:leather_boots",
        "item:leather_gloves",
        "item:chain_coif",
        "item:chainmail_vest",
        "item:chain_leggings",
        "item:iron_boots",
        "item:iron_gauntlets",
        "item:iron_shield",
        "item:steel_longsword",
        "item:health_potion",
        "item:mana_potion"
      ],
      "imagePrompt": "Full-body brawny human blacksmith standing upright facing the viewer, muscular arms, soot-stained leather apron, holding a forge hammer in one hand and tongs in the other, short dark hair. Single character, isolated on solid transparent background, no ground, no scenery.",
      "imageStyle": "fantasy character sprite, full body, front-facing, clean edges, game asset, transparent background, PNG cutout",
      "imageNegativePrompt": "background, scenery, ground, shadow on floor, multiple characters, portrait crop, bust only, modern, sci-fi, anime",
      "imageWidth": 384,
      "imageHeight": 512
    }
  ]
}
